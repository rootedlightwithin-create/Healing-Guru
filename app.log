 * Serving Flask app 'app_chat'
 * Debug mode: off
[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5002
 * Running on http://192.168.0.43:5002
[33mPress CTRL+C to quit[0m
[2025-12-12 13:46:40,162] ERROR in app: Exception on /api/chat [POST]
Traceback (most recent call last):
  File "/Users/shennahodge/healing_guru_app/test_venv/lib/python3.13/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/shennahodge/healing_guru_app/test_venv/lib/python3.13/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/shennahodge/healing_guru_app/test_venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/shennahodge/healing_guru_app/test_venv/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/shennahodge/healing_guru_app/app_chat.py", line 1956, in chat
    ai_analysis = ai.analyze_message(user_message, history)
  File "/Users/shennahodge/healing_guru_app/app_chat.py", line 779, in analyze_message
    return self.generate_empathetic_response(message, conversation_history)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/shennahodge/healing_guru_app/app_chat.py", line 1881, in generate_empathetic_response
    if not time_period and conversation_history:
                           ^^^^^^^^^^^^^^^^^^^^
NameError: name 'conversation_history' is not defined
127.0.0.1 - - [12/Dec/2025 13:46:40] "[35m[1mPOST /api/chat HTTP/1.1[0m" 500 -
[2025-12-12 13:47:31,092] ERROR in app: Exception on /api/chat [POST]
Traceback (most recent call last):
  File "/Users/shennahodge/healing_guru_app/test_venv/lib/python3.13/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/shennahodge/healing_guru_app/test_venv/lib/python3.13/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/shennahodge/healing_guru_app/test_venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/shennahodge/healing_guru_app/test_venv/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/shennahodge/healing_guru_app/app_chat.py", line 1952, in chat
    c.execute('INSERT INTO messages (user_id, role, content) VALUES (?, ?, ?)',
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
              (user_id, 'user', user_message))
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: database is locked
127.0.0.1 - - [12/Dec/2025 13:47:31] "[35m[1mPOST /api/chat HTTP/1.1[0m" 500 -
[2025-12-12 13:48:05,137] ERROR in app: Exception on /api/chat [POST]
Traceback (most recent call last):
  File "/Users/shennahodge/healing_guru_app/test_venv/lib/python3.13/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/shennahodge/healing_guru_app/test_venv/lib/python3.13/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/shennahodge/healing_guru_app/test_venv/lib/python3.13/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/shennahodge/healing_guru_app/test_venv/lib/python3.13/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Users/shennahodge/healing_guru_app/app_chat.py", line 1952, in chat
    c.execute('INSERT INTO messages (user_id, role, content) VALUES (?, ?, ?)',
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
              (user_id, 'user', user_message))
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: database is locked
127.0.0.1 - - [12/Dec/2025 13:48:05] "[35m[1mPOST /api/chat HTTP/1.1[0m" 500 -
127.0.0.1 - - [14/Dec/2025 18:16:14] "GET / HTTP/1.1" 200 -
